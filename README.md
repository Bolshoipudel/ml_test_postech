# LLM Assistant - –ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç

> –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∏ –≤ ML –∫–æ–º–∞–Ω–¥—É Positive Technologies

–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π LLM-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ RAG, SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–µ–±-–ø–æ–∏—Å–∫–∞ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ Positive Technologies.

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:
- ü§ñ **Router Agent** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
- üìö **RAG (Retrieval-Augmented Generation)** - –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ PT
- üóÑÔ∏è **SQL Agent** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
- üåê **Web Search Agent** - –∏—â–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
- üéº **Orchestrator** - –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å: **–í–°–ï –§–ê–ó–´ –†–ï–ê–õ–ò–ó–û–í–ê–ù–´** ‚úÖ

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### üèóÔ∏è –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π
- ‚úÖ Pydantic Settings –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ .env
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ loguru
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ CORS middleware
- ‚úÖ Health check –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤

#### üîå API Endpoints
```
POST   /api/v1/chat              - –û—Å–Ω–æ–≤–Ω–æ–π endpoint –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º
GET    /api/v1/health            - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
POST   /api/v1/feedback          - –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
GET    /api/v1/history/{id}      - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
DELETE /api/v1/history/{id}      - –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Å–µ—Å—Å–∏–∏
GET    /api/v1/stats             - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
GET    /api/v1/rag/stats         - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ RAG –∫–æ–ª–ª–µ–∫—Ü–∏–∏
POST   /api/v1/rag/reload        - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
GET    /api/v1/rag/debug/{query} - –û—Ç–ª–∞–¥–∫–∞ RAG –ø–æ–∏—Å–∫–∞
```

#### ü§ñ Router Agent (–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º LLM
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (SQL/RAG/WEB_SEARCH/MULTIPLE)
- ‚úÖ Few-shot –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
- ‚úÖ –û—Ü–µ–Ω–∫–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (confidence score)
- ‚úÖ Fallback –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (MULTIPLE)

**–ü—Ä–∏–º–µ—Ä—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏:**
```python
"–°–∫–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ PT AI?"        ‚Üí SQL
"–ß—Ç–æ —Ç–∞–∫–æ–µ PT Sandbox?"                            ‚Üí RAG
"–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"           ‚Üí WEB_SEARCH
"–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ –≤ –∫–æ–º–∞–Ω–¥–µ PT AI –∏ –∫–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏?" ‚Üí SQL + RAG
```

#### üìö RAG Agent (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- ‚úÖ ChromaDB –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
- ‚úÖ OpenAI Embeddings / Sentence Transformers
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Markdown, TXT)
- ‚úÖ Chunking —Å —É–º–Ω—ã–º —Ä–∞–∑–±–∏–µ–Ω–∏–µ–º –ø–æ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞–º
- ‚úÖ Semantic search —Å –æ—Ü–µ–Ω–∫–æ–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É –ø–æ—Ä–æ–≥—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

#### üóÑÔ∏è SQL Agent (–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ Natural Language to SQL –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∏–∑ –≤–æ–ø—Ä–æ—Å–æ–≤
- ‚úÖ Guardrails –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Ç–æ–ª—å–∫–æ SELECT)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —è–∑—ã–∫
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL injection
- ‚úÖ –°—Ö–µ–º–∞ –ë–î —Å –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏ PT

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- `departments` - 6 –æ—Ç–¥–µ–ª–æ–≤
- `products` - 5 –ø—Ä–æ–¥—É–∫—Ç–æ–≤ (PT AI, PT NAD, PT Sandbox, PT MS, PT ISIM)
- `team_members` - 12 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- `features` - 8 —Ñ–∏—á –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- `incidents` - 8 –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤/–±–∞–≥–æ–≤

#### üåê Web Search Agent
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Tavily API
- ‚úÖ Semantic search –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
- ‚úÖ –ü–æ–∏—Å–∫ –Ω–æ–≤–æ—Å—Ç–µ–π –∑–∞ N –¥–Ω–µ–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏ –¥–∞—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

#### üéº Orchestrator Service
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ –°–∏–Ω—Ç–µ–∑ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º LLM
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤

#### üîß LLM Factory (–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
- ‚úÖ OpenAI API (GPT-4, GPT-3.5)
- ‚úÖ Ollama –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ì–∏–±–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ temperature –ø–æ–¥ –∑–∞–¥–∞—á—É
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è API
- ‚úÖ –¢–µ—Å—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ (SQL, RAG, Web Search, Router)
- ‚úÖ Pytest fixtures –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (test_router_manual.py)

#### üê≥ Docker Infrastructure
- ‚úÖ Multi-stage Dockerfile –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ docker-compose.yml —Å PostgreSQL
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
- ‚úÖ Health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

#### üåç –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ **–í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ docstrings –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫**
- ‚úÖ **–£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –∏ –æ—á–µ–≤–∏–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç-—Å—Ç—Ä–æ–∫–∏**
- ‚úÖ **–û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
- ‚úÖ –õ–æ–≥–∏ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞)
- ‚úÖ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM –Ω–∞ —è–∑—ã–∫–∞—Ö –æ—Ä–∏–≥–∏–Ω–∞–ª–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.11+
- Docker & Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- PostgreSQL (–µ—Å–ª–∏ –±–µ–∑ Docker)
- OpenAI API Key
- Tavily API Key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –≤–µ–±-–ø–æ–∏—Å–∫–∞)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (Docker) - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <your-repo-url>
cd ml_test_postech
```

2. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª**
```bash
# Windows
copy .env.example .env
# Linux/Mac
cp .env.example .env
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à–∏ API –∫–ª—é—á–∏:
```env
# LLM Provider
OPENAI_API_KEY=sk-your_openai_key_here
LLM_PROVIDER=openai
LLM_MODEL=gpt-4.1

# Web Search (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TAVILY_API_KEY=tvly-your_tavily_key_here

# Database
POSTGRES_USER=llm_assistant
POSTGRES_PASSWORD=secure_password
POSTGRES_DB=llm_assistant_db
```

4. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å Docker Compose**
```bash
docker-compose up --build -d
```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**
```bash
docker-compose ps
docker-compose logs -f app
```

6. **–î–æ—Å—Ç—É–ø –∫ API**
- API: http://localhost:8000
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

7. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞**
```bash
# Windows
stop.bat

# Linux/Mac
docker-compose down
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ)

1. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
pip install -r requirements.txt
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –ë–î
createdb llm_assistant_db

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ö–µ–º—É
psql -d llm_assistant_db -f data/sql/init.sql
```

4. **–°–æ–∑–¥–∞–π—Ç–µ .env –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**
```bash
copy .env.example .env
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
```bash
# Windows
run.bat

# Linux/Mac
python -m uvicorn app.main:app --reload
```

## üìñ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –í–æ–ø—Ä–æ—Å –æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (RAG)
```bash
curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "–ß—Ç–æ —Ç–∞–∫–æ–µ PT Application Inspector –∏ –∫–∞–∫–∏–µ —É –Ω–µ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏?"
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "PT Application Inspector (PT AI) - —ç—Ç–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∫–æ–¥–∞...",
  "tools_used": [
    {
      "tool_type": "router",
      "reasoning": "–í–æ–ø—Ä–æ—Å –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö –ø—Ä–æ–¥—É–∫—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–∏—Å–∫–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",
      "confidence": 0.9
    },
    {
      "tool_type": "rag",
      "result_summary": "–ù–∞–π–¥–µ–Ω–æ 5 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
    }
  ],
  "sources": ["documentation: PT_AI.md", "documentation: PT_Products.md"]
}
```

### 2. SQL –∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```bash
curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "–°–∫–æ–ª—å–∫–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ PT Sandbox?"
  }'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "message": "–ù–∞–¥ –ø—Ä–æ–¥—É–∫—Ç–æ–º PT Sandbox —Ä–∞–±–æ—Ç–∞–µ—Ç 3 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞...",
  "tools_used": [
    {
      "tool_type": "router",
      "reasoning": "–í–æ–ø—Ä–æ—Å –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ –ë–î",
      "confidence": 0.95
    },
    {
      "tool_type": "sql",
      "query": "SELECT COUNT(*) FROM team_members...",
      "result_summary": "–ù–∞–π–¥–µ–Ω–æ 3 –∑–∞–ø–∏—Å–∏"
    }
  ],
  "sources": ["database: PostgreSQL"]
}
```

### 3. –í–µ–±-–ø–æ–∏—Å–∫
```bash
curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "–ö–∞–∫–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ –∫–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?"
  }'
```

### 4. –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç–æ–≤)
```bash
curl -X POST http://localhost:8000/api/v1/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ –≤ –∫–æ–º–∞–Ω–¥–µ PT AI –∏ –∫–∞–∫–∏–µ —É –Ω–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–∏?"
  }'
```

**Router –≤—ã–±–µ—Ä–µ—Ç:** SQL + RAG ‚Üí Orchestrator –æ–±—ä–µ–¥–∏–Ω–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
                                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                 ‚îÇ   Client    ‚îÇ
                                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                        ‚îÇ
                                        ‚ñº
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ       FastAPI Application      ‚îÇ
                        ‚îÇ      (app/main.py)             ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                        ‚îÇ
                                        ‚ñº
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ    Orchestrator Service        ‚îÇ
                        ‚îÇ  (–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤)         ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                        ‚îÇ
                                        ‚ñº
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ      Router Agent              ‚îÇ
                        ‚îÇ  (–ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤)      ‚îÇ
                        ‚îÇ  ‚Ä¢ Few-shot –ø—Ä–∏–º–µ—Ä—ã            ‚îÇ
                        ‚îÇ  ‚Ä¢ Confidence scoring          ‚îÇ
                        ‚îÇ  ‚Ä¢ Fallback –ª–æ–≥–∏–∫–∞             ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                        ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                   ‚îÇ                 ‚îÇ
                    ‚ñº                   ‚ñº                 ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   RAG Agent      ‚îÇ  ‚îÇ  SQL Agent   ‚îÇ  ‚îÇ Web Search   ‚îÇ
        ‚îÇ                  ‚îÇ  ‚îÇ              ‚îÇ  ‚îÇ   Agent      ‚îÇ
        ‚îÇ ‚Ä¢ ChromaDB       ‚îÇ  ‚îÇ ‚Ä¢ NL‚ÜíSQL     ‚îÇ  ‚îÇ ‚Ä¢ Tavily API ‚îÇ
        ‚îÇ ‚Ä¢ Embeddings     ‚îÇ  ‚îÇ ‚Ä¢ Guardrails ‚îÇ  ‚îÇ ‚Ä¢ News       ‚îÇ
        ‚îÇ ‚Ä¢ Similarity     ‚îÇ  ‚îÇ ‚Ä¢ Validation ‚îÇ  ‚îÇ ‚Ä¢ Filtering  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ                   ‚îÇ                  ‚îÇ
                 ‚ñº                   ‚ñº                  ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   ChromaDB   ‚îÇ    ‚îÇ  PostgreSQL  ‚îÇ  ‚îÇ    Tavily    ‚îÇ
        ‚îÇ (–î–æ–∫—É–º–µ–Ω—Ç—ã)  ‚îÇ    ‚îÇ  (–ö–æ–º–∞–Ω–¥–∞)   ‚îÇ  ‚îÇ  (–ò–Ω—Ç–µ—Ä–Ω–µ—Ç)  ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

1. **Client** ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–æ–ø—Ä–æ—Å
2. **API Layer** ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏–∏
3. **Orchestrator** ‚Üí –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞
4. **Router Agent** ‚Üí –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∏ –≤—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞(–æ–≤)
5. **Agent(s)** ‚Üí –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (RAG/SQL/Web Search –∏–ª–∏ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏—è)
6. **Orchestrator** ‚Üí –∞–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
7. **API Layer** ‚Üí —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
8. **Client** ‚Üê –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
ml_test_postech/
‚îú‚îÄ‚îÄ app/                           # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ agents/                    # –ê–≥–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ router_agent.py       # ‚úÖ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag_agent.py          # ‚úÖ RAG –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sql_agent.py          # ‚úÖ NL‚ÜíSQL –∞–≥–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ web_search_agent.py   # ‚úÖ –í–µ–±-–ø–æ–∏—Å–∫
‚îÇ   ‚îú‚îÄ‚îÄ api/                       # API endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes.py             # ‚úÖ REST API
‚îÇ   ‚îú‚îÄ‚îÄ models/                    # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py           # ‚úÖ SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py            # ‚úÖ Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ services/                  # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orchestrator_service.py  # ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag_service.py          # ‚úÖ –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database_service.py     # ‚úÖ –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search_service.py       # ‚úÖ –í–µ–±-–ø–æ–∏—Å–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ llm_factory.py          # ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ LLM
‚îÇ   ‚îú‚îÄ‚îÄ prompts/                   # –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router_prompts.py     # ‚úÖ –ü—Ä–æ–º–ø—Ç—ã —Ä–æ—É—Ç–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ utils/                     # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ document_loader.py    # ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ config.py                  # ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ main.py                    # ‚úÖ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ data/                          # –î–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ docs/                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è RAG
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PT_AI.md              # PT Application Inspector
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PT_Sandbox.md         # PT Sandbox
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...                   # –î—Ä—É–≥–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ sql/                       # SQL —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ init.sql              # ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ tests/                         # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py               # ‚úÖ –¢–µ—Å—Ç—ã API
‚îÇ   ‚îú‚îÄ‚îÄ test_sql_agent.py         # ‚úÖ –¢–µ—Å—Ç—ã SQL –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_rag_agent.py         # ‚úÖ –¢–µ—Å—Ç—ã RAG –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_web_search_agent.py  # ‚úÖ –¢–µ—Å—Ç—ã –≤–µ–±-–ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ test_router_agent.py      # ‚úÖ –¢–µ—Å—Ç—ã —Ä–æ—É—Ç–µ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ conftest.py               # Fixtures
‚îú‚îÄ‚îÄ chroma_db/                     # ChromaDB –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
‚îú‚îÄ‚îÄ docker-compose.yml             # ‚úÖ Docker –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                     # ‚úÖ Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ requirements.txt               # ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                   # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ pytest.ini                     # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ pytest
‚îî‚îÄ‚îÄ README.md                      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend & API
- **FastAPI** 0.104+ - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π async –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Pydantic** 2.4+ - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä

### LLM & AI
- **LangChain** 0.1+ - –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è LLM –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **OpenAI API** - GPT-4 / GPT-3.5-turbo
- **Ollama** - –õ–æ–∫–∞–ª—å–Ω—ã–µ LLM –º–æ–¥–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Vector Database & Embeddings
- **ChromaDB** 0.4+ - –í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
- **OpenAI Embeddings** - text-embedding-3-small
- **Sentence Transformers** - –õ–æ–∫–∞–ª—å–Ω—ã–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Relational Database
- **PostgreSQL** 15+ - –û—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **SQLAlchemy** 2.0+ - ORM
- **Psycopg2** - PostgreSQL –∞–¥–∞–ø—Ç–µ—Ä

### Web Search
- **Tavily** - Semantic search API
- **httpx** - HTTP –∫–ª–∏–µ–Ω—Ç

### Testing
- **Pytest** - –§—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **pytest-asyncio** - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **pytest-cov** - Coverage –æ—Ç—á–µ—Ç—ã

### DevOps
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Docker Compose** - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

### Utilities
- **Loguru** - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Python-dotenv** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
pytest tests/ -v
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
```bash
pytest tests/test_sql_agent.py -v
pytest tests/test_router_agent.py -v
pytest tests/test_rag_agent.py -v
```

### –° coverage –æ—Ç—á—ë—Ç–æ–º
```bash
pytest tests/ -v --cov=app --cov-report=html
```

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Router Agent
```bash
python test_router_manual.py
```

## üéõÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:

```env
# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
APP_NAME=LLM Assistant
APP_VERSION=1.0.0
DEBUG=false
LOG_LEVEL=INFO

# API
API_HOST=0.0.0.0
API_PORT=8000

# LLM Provider (openai –∏–ª–∏ ollama)
LLM_PROVIDER=openai
LLM_MODEL=gpt-4
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000
OPENAI_API_KEY=sk-your_key_here

# Ollama (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3

# Embeddings (openai –∏–ª–∏ sentence-transformers)
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small

# Vector Store
VECTOR_STORE=chroma
CHROMA_PERSIST_DIRECTORY=./chroma_db
CHUNK_SIZE=1000
CHUNK_OVERLAP=200

# Database
POSTGRES_USER=llm_assistant
POSTGRES_PASSWORD=secure_password
POSTGRES_DB=llm_assistant_db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Web Search
TAVILY_API_KEY=tvly-your_key_here
WEB_SEARCH_ENABLED=true
MAX_SEARCH_RESULTS=5

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
ENABLE_GUARDRAILS=true
ALLOWED_SQL_OPERATIONS=SELECT
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞
```bash
curl http://localhost:8000/api/v1/health
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```bash
curl http://localhost:8000/api/v1/stats
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ RAG –∫–æ–ª–ª–µ–∫—Ü–∏–∏
```bash
curl http://localhost:8000/api/v1/rag/stats
```

### –û—Ç–ª–∞–¥–∫–∞ RAG –ø–æ–∏—Å–∫–∞
```bash
curl http://localhost:8000/api/v1/rag/debug/PT%20Sandbox
```

### –õ–æ–≥–∏ Docker
```bash
docker-compose logs -f app
docker-compose logs -f db
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–µ
**–í–æ–ø—Ä–æ—Å:** "–†–∞—Å—Å–∫–∞–∂–∏ –æ PT Network Attack Discovery"
- **Router:** RAG Agent
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã
**–í–æ–ø—Ä–æ—Å:** "–°–∫–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –ø–æ PT Sandbox?"
- **Router:** SQL Agent
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** PostgreSQL
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
**–í–æ–ø—Ä–æ—Å:** "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ Application Security"
- **Router:** Web Search Agent
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Tavily (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–≤–æ–¥–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –∑–∞ 7 –¥–Ω–µ–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
**–í–æ–ø—Ä–æ—Å:** "–°–∫–æ–ª—å–∫–æ —á–µ–ª–æ–≤–µ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ PT AI –∏ –∫–∞–∫–∏–µ —É –Ω–µ–≥–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏?"
- **Router:** MULTIPLE (SQL + RAG)
- **–ò—Å—Ç–æ—á–Ω–∏–∫–∏:** PostgreSQL + –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **Orchestrator:** –°–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—ã–π –æ—Ç–≤–µ—Ç
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** "–ù–∞–¥ PT AI —Ä–∞–±–æ—Ç–∞–µ—Ç 3 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞. –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: SAST –∞–Ω–∞–ª–∏–∑, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 30+ —è–∑—ã–∫–æ–≤..."

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã:
- ‚úÖ **SQL Guardrails** - —Ç–æ–ª—å–∫–æ SELECT –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã
- ‚úÖ **SQL Injection –∑–∞—â–∏—Ç–∞** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **–ó–∞–ø—Ä–µ—Ç –æ–ø–∞—Å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥** - DROP, DELETE, UPDATE –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤** - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ xp_, sp_ –∏ –¥—Ä—É–≥–∏—Ö –æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- ‚úÖ **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏
- ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –≤ –∫–æ–¥–µ

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ (FastAPI + asyncio)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (lru_cache)
- Connection pooling –¥–ª—è –ë–î
- Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ ChromaDB
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

## üìù Roadmap

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [x] API endpoints
- [x] RAG —Å–∏—Å—Ç–µ–º–∞ —Å ChromaDB
- [x] SQL Agent —Å guardrails
- [x] Web Search Agent
- [x] Router Agent
- [x] Orchestrator –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏
- [x] LLM Factory (OpenAI + Ollama)
- [x] Docker –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [x] –¢–µ—Å—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [x] –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π

### üîÆ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- [ ] DeepEval –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- [ ] Streamlit UI –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- [ ] Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏—Å—Ç–æ—Ä–∏–∏
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å Prometheus/Grafana
- [ ] CI/CD pipeline
- [ ] Speech-to-Text –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] Multi-turn –¥–∏–∞–ª–æ–≥–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- [ ] Fine-tuned Router –º–æ–¥–µ–ª—å

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç–∏–ª—å –∫–æ–¥–∞
- –°–ª–µ–¥—É–µ–º PEP 8
- Docstrings –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- –õ–æ–≥–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
- Type hints –≤–µ–∑–¥–µ –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞
1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `app/agents/your_agent.py`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –∫–ª–∞—Å—Å —Å –º–µ—Ç–æ–¥–∞–º–∏ `initialize()` –∏ –æ—Å–Ω–æ–≤–Ω—ã–º –º–µ—Ç–æ–¥–æ–º
3. –î–æ–±–∞–≤—å—Ç–µ –≤ Router –ø—Ä–æ–º–ø—Ç—ã –∏ –ª–æ–≥–∏–∫—É –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. –î–æ–±–∞–≤—å—Ç–µ –≤ Orchestrator –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
5. –ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –≤ `tests/test_your_agent.py`

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [FastAPI Documentation](https://fastapi.tiangolo.com/)
- [LangChain Documentation](https://python.langchain.com/)
- [ChromaDB Documentation](https://docs.trychroma.com/)
- [OpenAI API](https://platform.openai.com/docs/)
- [Tavily API](https://tavily.com/)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë§ –ê–≤—Ç–æ—Ä

–û—Ä–ª–æ–≤ –ì—Ä–∏–≥–æ—Ä–∏–π

---

**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:** Production Ready ‚úÖ

–í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.
